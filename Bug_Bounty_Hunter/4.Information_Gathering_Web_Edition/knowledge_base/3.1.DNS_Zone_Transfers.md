# DNS Zone Transfers

This mechanism is designed for replicating DNS records between name servers, and if misconfigured can become a goldmine.

**What is a Zone Transfer**

Is a copy of all DNS records within a zone from one name server to another.

This is essential to maintain consistency and redundancy accross DNS servers.

If not properly secured, hackers can download the entire zone file, which reveals a complete list of subdomains, ip addresses and other sensitive DNS data.

The process:
- **Zone Transfer Request AXFR** - Is when a secondary DNS server sends a zone transfer request to the primary transfer. AXFR is a full zone transfer.
- **SOA Record Transfer** - The primary server responds by sending its `Start of Authority` record, which contains vital information about the zone, such as the serial number.
- **DNS Record Transmission** - The primary transfer then tnransfers all the DNS records one by one.
- **Zone Transfer Complete** - When the transfer is completed the primary transfer signals the end of the transfer.
- **Acknowledgement** - The secondary server sends and ACK message to the primary server, confirming the transfer.

**Zone Transfer Vulnerability**

The core issue is the access controls that govern who can initiate a zone transfer.

In hte early days, allowing any client to request it was a common practice.

**Exploiting**

Request a zone trasnfer:
```sh
dig axfr @nsztm1.digi.ninja zonetransfer.me
```
This requests a full zone transfer from the DNS responsible for zonetransfer.me.

