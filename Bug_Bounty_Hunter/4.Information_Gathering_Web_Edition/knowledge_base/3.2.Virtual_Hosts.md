# Virtual Hosts

Web Servers such as **Apache, Nginx, IIS** are designed to host multiple webistes or apps on a single server.

This is achieved through virtual hosting, allowing to differentiate between domains, subdomains, and even websites with distinct content.

**How they work**
This behavior is possible by leveraging the `HTTP Host` header.

The difference between **VHosts** and **subdomains** is the relationship to the DNS and hte web server's configuration:
- Subdomains - extensions to the main domain name. Typically have their own DNS records.
- VHosts - Are configurations within a web server that allows multiple websites to be hosted on a single server. Each VHost can have its configuration.

`Vhost fuzzing` is a technique to discover public and non-public subdomains and VHosts by testing a number of hostnames against a known ip address.

Process:
- Browser requests a website by initiating a HTTP request.
- Browser includes the domain name in the Host header, which informs the web server which website is being requested.
- Web server examines the header, and consults its virtual host configuration to find a matching entry.
- Web server retrieves the files and resources associated with that websitefrom its document root and sends them back to the browser.

Types of Vhosting:
- Name-Based: Relies on the HTTP Host header to distinguish websites. It's the most common, and it reuires the web server to support it, and can have limitations with some protocols like SSL/TLS.
- IP-Based: Assigns a unique IP address to each website on the host. It doesn't rely on the Host header, offers better isolation, but requires multiple ip addresses which can make it more expensive and less scalable.
- Port-based: Different ports on the same IP address. Its not very user-friendly as it might require users to specify the port number in the URL.

Discovery:
There are a number of tools helping on discovering them such as `gobuster, feroxbuster, ffuf`.

**gobuster**

```sh
gobuster vhost -u http://webiste -w wordlist --append-domain
```

`--append-domain` flag appends the base domain to each word in the wordlist.

